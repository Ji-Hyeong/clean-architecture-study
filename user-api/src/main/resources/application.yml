# user-api 기본 설정이다.
spring:
  # 애플리케이션 식별자 설정이다.
  application:
    name: user-api
  # PostgreSQL 연결 설정이다.
  datasource:
    url: "jdbc:postgresql://localhost:5432/clean_arch"
    username: "admin"
    password: "testPassword@"
  # JPA 기본 동작을 제어한다.
  jpa:
    # 스키마는 Flyway로 관리하고, JPA는 생성/검증을 수행하지 않는다.
    hibernate:
      ddl-auto: "none"
    # SQL 로그는 필요 시만 확인하도록 기본값을 false로 둔다.
    show-sql: false
  # Flyway 마이그레이션 설정이다.
  flyway:
    enabled: true
    locations: "classpath:db/migration"
    # 마이그레이션 적용 시 스키마 유효성을 함께 검사한다.
    validate-on-migrate: true
  # OIDC 리소스 서버 설정이다.
  security:
    oauth2:
      resourceserver:
        jwt:
          # Keycloak issuer URI는 Realm 경로와 반드시 일치해야 한다.
          issuer-uri: "http://localhost:8080/realms/clean-architecture"
      client:
        registration:
          keycloak:
            # Keycloak에 등록된 클라이언트 ID다.
            client-id: "user-api"
            # 로컬 개발용 클라이언트 시크릿이다.
            client-secret: "user-api-secret"
            # OIDC 표준 스코프와 이메일 클레임을 요청한다.
            scope: "openid,profile,email"
        provider:
          keycloak:
            # 로그인/토큰 엔드포인트를 찾아가기 위한 issuer URI다.
            issuer-uri: "http://localhost:8080/realms/clean-architecture"
